<div class="mat-elevation-z8">
    <button (click)="addNewSysAdmin()">Add New SysAdmin</button>
    <table>
        <thead>
          <tr>
            <th>Company Name</th>
            <th>Description</th>
            <th>Admins</th>
            <th><button (click)="addNewCompany()">Add New Company</button></th>
          </tr>
        </thead>
        <tbody>
          <ng-container *ngFor="let company of companies">
            <tr>
              <td>{{ company.name }}</td>
              <td>{{ company.description }}</td>
              <td>
                    <p *ngFor="let admin of company.admins">
                        {{ admin.name }} {{ admin.surname }} {{ admin.email }}
                    </p>
              </td>
              <td>
                <button (click)="addNewAdmin(company.id)">Add New Admin</button>
              </td>
            </tr>
          </ng-container>
        </tbody>
    </table>

    <div  *ngIf="isCompanyFormVisible">
        <h2>Company Creation</h2>
        <form [formGroup]="companyForm" (ngSubmit)="saveCompany()">
            <div class="form">
                <mat-form-field>
                    <mat-label>Name</mat-label>
                    <input matInput formControlName="name" type="text" />
                </mat-form-field>
                <mat-form-field>
                    <mat-label>Description</mat-label>
                    <input matInput formControlName="description" type="text" />
                </mat-form-field>
                
                <div formGroupName="address" class="form">
                    <mat-form-field>
                        <mat-label>Street</mat-label>
                        <input matInput formControlName="street" type="text" />
                    </mat-form-field>
                    <mat-form-field>
                        <mat-label>Street number</mat-label>
                        <input matInput formControlName="streetNumber" type="text" />
                    </mat-form-field>
                    <mat-form-field>
                        <mat-label>Country</mat-label>
                        <input matInput formControlName="country" type="text" />
                    </mat-form-field>
                    <mat-form-field>
                        <mat-label>City</mat-label>
                        <input matInput formControlName="city" type="text" />
                    </mat-form-field>
                </div>

                <div *ngIf="errorMessage" class="error-message">
                    {{ errorMessage }}
                </div>

                <button color="primary" type="submit" mat-raised-button>Create</button>
                <button mat-button type="button" (click)="cancelCompanyCreation()">Cancel</button>
            </div>
        </form>
    </div>

    <div *ngIf="isAdminFormVisible">
        <h2>Admin Creation</h2>
        <form [formGroup]="adminForm" (ngSubmit)="saveAdmin()">
            <div class="form">
                <mat-form-field>
                    <mat-label>Name</mat-label>
                    <input matInput formControlName="name" type="text" />
                </mat-form-field>
                <mat-form-field>
                    <mat-label>Surname</mat-label>
                    <input matInput formControlName="surname" type="text" />
                </mat-form-field>
                <mat-form-field>
                    <mat-label>Email</mat-label>
                    <input matInput formControlName="email" type="text" />
                </mat-form-field>
                <mat-form-field>
                    <mat-label>Phone number</mat-label>
                    <input matInput formControlName="phoneNumber" type="text" />
                </mat-form-field>

                <div *ngIf="errorMessage" class="error-message">
                    {{ errorMessage }}
                </div>

                <button color="primary" type="submit" mat-raised-button>Create</button>
                <button mat-button type="button" (click)="cancelAdminCreation()">Cancel</button>
            </div>
        </form>
    </div>

    <div *ngIf="isSysAdminFormVisible">
        <h2>SysAdmin Creation</h2>
        <form [formGroup]="sysAdminForm" (ngSubmit)="saveSysAdmin()">
            <div class="form">
                <mat-form-field>
                    <mat-label>Name</mat-label>
                    <input matInput formControlName="name" type="text" />
                </mat-form-field>
                <mat-form-field>
                    <mat-label>Surname</mat-label>
                    <input matInput formControlName="surname" type="text" />
                </mat-form-field>
                <mat-form-field>
                    <mat-label>Email</mat-label>
                    <input matInput formControlName="email" type="text" />
                </mat-form-field>
                <mat-form-field>
                    <mat-label>Phone number</mat-label>
                    <input matInput formControlName="phoneNumber" type="text" />
                </mat-form-field>

                <div *ngIf="errorMessage" class="error-message">
                    {{ errorMessage }}
                </div>

                <button color="primary" type="submit" mat-raised-button>Create</button>
                <button mat-button type="button" (click)="cancelSysAdminCreation()">Cancel</button>
            </div>
        </form>
    </div>
</div>