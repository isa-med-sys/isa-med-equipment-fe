<div *ngIf="user" class="user-profile-container">
    <h2>User Profile</h2>
    <form [formGroup]="userProfileForm" *ngIf="isEditable" (ngSubmit)="saveChanges()">
        <div class="form">
            <mat-form-field>
                <mat-label>Name</mat-label>
                <input matInput formControlName="name" type="text" />
            </mat-form-field>
            <mat-form-field>
                <mat-label>Surname</mat-label>
                <input matInput formControlName="surname" type="text" />
            </mat-form-field>
            <mat-form-field>
                <mat-label>New Password</mat-label>
                <input matInput formControlName="newPassword" type="password" />
            </mat-form-field>
            <mat-form-field>
                <mat-label>Phone number</mat-label>
                <input matInput formControlName="phoneNumber" type="text" />
            </mat-form-field>
            <mat-form-field>
                <mat-label>Occupation</mat-label>
                <input matInput formControlName="occupation" type="text" />
            </mat-form-field>
            <mat-form-field>
                <mat-label>Company information</mat-label>
                <input matInput formControlName="companyInfo" type="text" />
            </mat-form-field>
            <div formGroupName="address" class="form">
                <mat-form-field>
                    <mat-label>Street</mat-label>
                    <input matInput formControlName="street" type="text" />
                </mat-form-field>
                <mat-form-field>
                    <mat-label>Street number</mat-label>
                    <input matInput formControlName="streetNumber" type="text" />
                </mat-form-field>
                <mat-form-field>
                    <mat-label>Country</mat-label>
                    <input matInput formControlName="country" type="text" />
                </mat-form-field>
                <mat-form-field>
                    <mat-label>City</mat-label>
                    <input matInput formControlName="city" type="text" />
                </mat-form-field>
            </div>
            <mat-form-field>
                <mat-label>Confirm Password</mat-label>
                <input matInput formControlName="currentPassword" type="password" />
            </mat-form-field>
            <div *ngIf="errorMessage" class="error-message">
                {{ errorMessage }}
            </div>
            <button color="primary" type="submit" mat-raised-button>Save Changes</button>
            <button mat-button type="button" (click)="discardChanges()">Discard Changes</button>
        </div>
    </form>

    <div *ngIf="!isEditable">
        <p><strong>Name:</strong> {{ user.name }}</p>
        <p><strong>Surname:</strong> {{ user.surname }}</p>
        <p><strong>E-Mail:</strong> {{ user.email }}</p>
        <p><strong>Phone Number:</strong> {{ user.phoneNumber }}</p>
        <p><strong>Occupation:</strong> {{ user.occupation }}</p>
        <p><strong>Company Information:</strong> {{ user.companyInfo }}</p>
        <p><strong>Address:</strong> {{ user.address.street }} {{ user.address.streetNumber }}, {{ user.address.city }},
            {{ user.address.country }}</p>
        <p>
            <strong>Penalty Points:</strong> {{ user.penaltyPoints }}
            <span title="Penalty points are reset every first of the month">
                <i class="material-icons">info</i>
            </span>
        </p>
        <button mat-button (click)="toggleEditMode()">Edit Profile</button>
    </div>
</div>